{
  "version": 3,
  "sources": ["../../app/netlify/functions/attendance-quick-check.js"],
  "sourceRoot": "/tmp/tmp-18-Ki5c4aGtHa4x",
  "sourcesContent": ["// Quick attendance check for QR scan\r\nexport async function handler(event, context) {\r\n  const headers = {\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Headers': 'Content-Type',\r\n    'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n    'Content-Type': 'application/json'\r\n  }\r\n\r\n  if (event.httpMethod === 'OPTIONS') {\r\n    return {\r\n      statusCode: 200,\r\n      headers,\r\n      body: ''\r\n    }\r\n  }\r\n\r\n  if (event.httpMethod !== 'POST') {\r\n    return {\r\n      statusCode: 405,\r\n      headers,\r\n      body: JSON.stringify({ error: 'Method not allowed' })\r\n    }\r\n  }\r\n\r\n  try {\r\n    const { qrCode, locationId, personnelId } = JSON.parse(event.body)\r\n\r\n    // Mock: Check if personnel has an open check-in\r\n    // In real implementation, query database for last attendance record\r\n    const hasOpenCheckIn = Math.random() > 0.5\r\n\r\n    const action = hasOpenCheckIn ? 'check-out' : 'check-in'\r\n    \r\n    const attendance = {\r\n      id: Math.random().toString(36).substr(2, 9),\r\n      personnelId: personnelId === 'auto' ? '1' : personnelId, // Mock auto-detection\r\n      action: action,\r\n      timestamp: new Date().toISOString(),\r\n      location: locationId,\r\n      qrCode: qrCode\r\n    }\r\n\r\n    return {\r\n      statusCode: 200,\r\n      headers,\r\n      body: JSON.stringify({\r\n        success: true,\r\n        action: action,\r\n        attendance: attendance,\r\n        message: `${action === 'check-in' ? 'Giri\u015F' : '\u00C7\u0131k\u0131\u015F'} ba\u015Far\u0131yla kaydedildi`\r\n      })\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      statusCode: 500,\r\n      headers,\r\n      body: JSON.stringify({\r\n        success: false,\r\n        error: 'Internal server error'\r\n      })\r\n    }\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,eAAsB,QAAQ,OAAO,SAAS;AAC5C,QAAM,UAAU;AAAA,IACd,+BAA+B;AAAA,IAC/B,gCAAgC;AAAA,IAChC,gCAAgC;AAAA,IAChC,gBAAgB;AAAA,EAClB;AAEA,MAAI,MAAM,eAAe,WAAW;AAClC,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM;AAAA,IACR;AAAA,EACF;AAEA,MAAI,MAAM,eAAe,QAAQ;AAC/B,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,OAAO,qBAAqB,CAAC;AAAA,IACtD;AAAA,EACF;AAEA,MAAI;AACF,UAAM,EAAE,QAAQ,YAAY,YAAY,IAAI,KAAK,MAAM,MAAM,IAAI;AAIjE,UAAM,iBAAiB,KAAK,OAAO,IAAI;AAEvC,UAAM,SAAS,iBAAiB,cAAc;AAE9C,UAAM,aAAa;AAAA,MACjB,IAAI,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC;AAAA,MAC1C,aAAa,gBAAgB,SAAS,MAAM;AAAA;AAAA,MAC5C;AAAA,MACA,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,MAClC,UAAU;AAAA,MACV;AAAA,IACF;AAEA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT;AAAA,QACA;AAAA,QACA,SAAS,GAAG,WAAW,aAAa,eAAU,yBAAO;AAAA,MACvD,CAAC;AAAA,IACH;AAAA,EACF,SAAS,OAAO;AACd,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
