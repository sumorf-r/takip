{
  "version": 3,
  "sources": ["../../app/netlify/functions/auth-verify.js"],
  "sourceRoot": "/tmp/tmp-18-z64zIAf07aFx",
  "sourcesContent": ["// Verify authentication token\r\nexport async function handler(event, context) {\r\n  const headers = {\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Headers': 'Content-Type, Authorization',\r\n    'Access-Control-Allow-Methods': 'GET, OPTIONS',\r\n    'Content-Type': 'application/json'\r\n  }\r\n\r\n  if (event.httpMethod === 'OPTIONS') {\r\n    return {\r\n      statusCode: 200,\r\n      headers,\r\n      body: ''\r\n    }\r\n  }\r\n\r\n  if (event.httpMethod !== 'GET') {\r\n    return {\r\n      statusCode: 405,\r\n      headers,\r\n      body: JSON.stringify({ error: 'Method not allowed' })\r\n    }\r\n  }\r\n\r\n  try {\r\n    const authorization = event.headers.authorization\r\n    \r\n    if (!authorization || !authorization.startsWith('Bearer ')) {\r\n      return {\r\n        statusCode: 401,\r\n        headers,\r\n        body: JSON.stringify({\r\n          success: false,\r\n          error: 'No token provided'\r\n        })\r\n      }\r\n    }\r\n\r\n    const token = authorization.substring(7)\r\n\r\n    // Mock token verification - replace with actual JWT verification\r\n    if (token.startsWith('jwt-token-') || token.startsWith('demo-token-')) {\r\n      return {\r\n        statusCode: 200,\r\n        headers,\r\n        body: JSON.stringify({\r\n          success: true,\r\n          user: {\r\n            id: '1',\r\n            email: 'admin@restaurant.com',\r\n            name: 'Admin User',\r\n            role: 'admin'\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    if (token.startsWith('personnel-token-')) {\r\n      return {\r\n        statusCode: 200,\r\n        headers,\r\n        body: JSON.stringify({\r\n          success: true,\r\n          user: {\r\n            id: '2',\r\n            name: 'Personnel User',\r\n            role: 'personnel'\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    return {\r\n      statusCode: 401,\r\n      headers,\r\n      body: JSON.stringify({\r\n        success: false,\r\n        error: 'Invalid token'\r\n      })\r\n    }\r\n  } catch (error) {\r\n    return {\r\n      statusCode: 500,\r\n      headers,\r\n      body: JSON.stringify({\r\n        success: false,\r\n        error: 'Internal server error'\r\n      })\r\n    }\r\n  }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,eAAsB,QAAQ,OAAO,SAAS;AAC5C,QAAM,UAAU;AAAA,IACd,+BAA+B;AAAA,IAC/B,gCAAgC;AAAA,IAChC,gCAAgC;AAAA,IAChC,gBAAgB;AAAA,EAClB;AAEA,MAAI,MAAM,eAAe,WAAW;AAClC,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM;AAAA,IACR;AAAA,EACF;AAEA,MAAI,MAAM,eAAe,OAAO;AAC9B,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,OAAO,qBAAqB,CAAC;AAAA,IACtD;AAAA,EACF;AAEA,MAAI;AACF,UAAM,gBAAgB,MAAM,QAAQ;AAEpC,QAAI,CAAC,iBAAiB,CAAC,cAAc,WAAW,SAAS,GAAG;AAC1D,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU;AAAA,UACnB,SAAS;AAAA,UACT,OAAO;AAAA,QACT,CAAC;AAAA,MACH;AAAA,IACF;AAEA,UAAM,QAAQ,cAAc,UAAU,CAAC;AAGvC,QAAI,MAAM,WAAW,YAAY,KAAK,MAAM,WAAW,aAAa,GAAG;AACrE,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU;AAAA,UACnB,SAAS;AAAA,UACT,MAAM;AAAA,YACJ,IAAI;AAAA,YACJ,OAAO;AAAA,YACP,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAEA,QAAI,MAAM,WAAW,kBAAkB,GAAG;AACxC,aAAO;AAAA,QACL,YAAY;AAAA,QACZ;AAAA,QACA,MAAM,KAAK,UAAU;AAAA,UACnB,SAAS;AAAA,UACT,MAAM;AAAA,YACJ,IAAI;AAAA,YACJ,MAAM;AAAA,YACN,MAAM;AAAA,UACR;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAEA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF,SAAS,OAAO;AACd,WAAO;AAAA,MACL,YAAY;AAAA,MACZ;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT,OAAO;AAAA,MACT,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
